package gemini_test

import (
	"fmt"
	"os"
	"testing"

	"github.com/yashikota/chronotes/pkg/gemini"
)

func TestSummaryHandler(t *testing.T) {
	token := os.Getenv("GEMINI_TOKEN")

	// テスト用の文章
	messages := []string{
		"今日はとても良い天気でした。朝から太陽が燦燦と輝いていて、空も澄み渡っていました。公園に出かけて、ゆっくり散歩を楽しみました。緑の芝生の上で、子供たちが遊んでいるのを見ていると、心が癒されます。特に、犬を連れた人たちが楽しそうに遊んでいる姿が印象的でした。",
		"その後、ランチにはずっと気になっていたラーメン屋さんに行きました。特製のチャーシューとコクのあるスープが絶品で、一口食べるごとに幸せが広がりました。ラーメンの後は、近くのカフェでデザートとして抹茶パフェを楽しみました。抹茶の風味が濃厚で、ほんのりとした甘さが口の中で広がります。リラックスしたひとときを過ごしました。",
		"午後は少し疲れたので、静かな図書館に寄りました。大好きな本を何冊か選んで、窓際の席に座りました。外の景色を眺めながら、ゆっくりと読書に浸るのは至福の時間です。特に最近読んでいる歴史小説が面白くて、ついつい時間を忘れて夢中になってしまいました。周りの静けさが心地よく、心が落ち着きます。",
		"夕方には友人と待ち合わせて、オシャレなレストランでディナーを楽しみました。季節の食材を使った創作料理はどれも美味しく、特に海鮮パスタが絶品でした。お店の雰囲気も素晴らしく、友人との楽しい会話がさらに盛り上がります。デザートにはチョコレートケーキをシェアしながら、笑い合って過ごしました。",
		"帰り道には、夜空を眺めながら散歩しました。涼しい風が心地よく、日中の賑やかさとは違った静けさがありました。星がきらきらと輝いていて、自然の美しさを感じることができました。今日も充実した一日で、明日もまた良い日になることを願っています。",
	}

	// 関数を実行
	result, err := gemini.Summary(messages, token)
	if err != nil {
		t.Errorf("エラーが発生しました: %v", err)
	}

	// 結果の出力（デバッグ用）
	fmt.Println("要約結果:", result)
}
